steps:
  - id: 'Run Tests'
    name: gradle:6.6-jdk11
    entrypoint: gradle
    args: ["test"]
    env:
      - 'pg_user=postgres'
      - 'pg_pwd=1qaz!QAZ'
    waitFor: ['-']

  - id: 'Build Jar'
    name: gradle:6.6-jdk11
    entrypoint: gradle
    args: ["build"]
    waitFor: ["Run Tests"]

#  - id: 'Deploy Help container PostgreSQL' # This step must run the last one because otherwise it would block the execution of the others
#    name: postgres:12
#    env:
#      - "POSTGRES_HOST_AUTH_METHOD=trust"
#    waitFor: ['-'] #start immediately

